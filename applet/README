This is the source code for PixeLens, some of which can be adapted.

